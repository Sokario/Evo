/*
 * parser.c
 *
 *  Created on: 3 nov. 2017
 *      Author: LogOut
 */

#include "parser.h"

u32 parser(u8 *cmd, u8 *result, XuartPs *uart)
{
	u32 status = -1;
	u32 cmd_value = 0;

	cmd_value = atoi((char *)cmd);
	char str[16];
	itoa(cmd_value, str, 16);
	writeMonitor(uart, str, sizeof(str));

	if ((cmd_value & TYPE_MASK) == 0x10000000) {
		status = 0;
		strcpy(result, "OK00000000000000");
	}
	if ((cmd[0] == 'O') && (cmd[1] == 'K')) {
		status = 0;
		strcpy(result, "OK00000000000000");
	} else if ((cmd[0] == 'R') && (cmd[1] == 'N')) {
		status = 1;
		strcpy(result, "CR00000000000000");
	} else
		strcpy(result, "ER00000000000000");

	return cmd_value;
}
